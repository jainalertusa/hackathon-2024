{% extends 'layout.html' %}
{% block title %}Database{% endblock %}

{% block content %}
    <h1>Database</h1>

    <form method="GET" action="/database">
        <div class="form-row">
            <div class="form-group col-md-2">
                <label for="city">City</label>
                <input type="text" class="form-control" id="city" name="city" value="{{ request.args.get('city', '') }}">
            </div>
            <div class="form-group col-md-2">
                <label for="state">State</label>
                <input type="text" class="form-control" id="state" name="state" value="{{ request.args.get('state', '') }}">
            </div>
            <div class="form-group col-md-2">
                <label for="zip_code">Zip Code</label>
                <input type="text" class="form-control" id="zip_code" name="zip_code" value="{{ request.args.get('zip_code', '') }}">
            </div>
            <div class="form-group col-md-2">
                <label for="price">Price</label>
                <input type="text" class="form-control" id="price" name="price" value="{{ request.args.get('price', '') }}">
            </div>
            <div class="form-group col-md-2">
                <label for="beds">Beds</label>
                <input type="text" class="form-control" id="beds" name="beds" value="{{ request.args.get('beds', '') }}">
            </div>
            <div class="form-group col-md-2">
                <label for="baths">Baths</label>
                <input type="text" class="form-control" id="baths" name="baths" value="{{ request.args.get('baths', '') }}">
            </div>
        </div>
        <div class="form-row">
            <div class="form-group col-md-2">
                <label for="sqft">Sqft</label>
                <input type="text" class="form-control" id="sqft" name="sqft" value="{{ request.args.get('sqft', '') }}">
            </div>
            <div class="form-group col-md-2">
                <label for="score_min">Score Minimum</label>
                <select class="form-control" id="score_min" name="score_min">
                    <option value="">Any</option>
                    <option value="8" {% if request.args.get('score_min') == '8' %} selected {% endif %}>8+</option>
                    <option value="9" {% if request.args.get('score_min') == '9' %} selected {% endif %}>9+</option>
                    <option value="10" {% if request.args.get('score_min') == '10' %} selected {% endif %}>10+</option>
                </select>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group col-md-2">
                <button type="submit" class="btn btn-primary">Apply Filters</button>
            </div>
        </div>
    </form>

    <table class="table table-striped">
        <thead>
            <tr>
                <th scope="col">First Line</th>
                <th scope="col">City</th>
                <th scope="col">State</th>
                <th scope="col">Zip Code</th>
                <th scope="col">Full Address</th>
                <th scope="col">Price</th>
                <th scope="col">Seller</th>
                <th scope="col">Beds</th>
                <th scope="col">Baths</th>
                <th scope="col">Sqft</th>
                <th scope="col">Score</th>
                <th scope="col">PPSF</th>
            </tr>
        </thead>
        <tbody>
            {% for row in rows %}
            <tr>
                <td>{{ row.first_line }}</td>
                <td>{{ row.city }}</td>
                <td>{{ row.state }}</td>
                <td>{{ row.zip_code }}</td>
                <td>{{ row.full_address }}</td>
                <td>{{ row.price }}</td>
                <td>{{ row.seller }}</td>
                <td>{{ row.beds }}</td>
                <td>{{ row.baths }}</td>
                <td>{{ row.sqft }}</td>
                <td>{{ row.score }}</td>
                <td>{{ row.ppsf }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
